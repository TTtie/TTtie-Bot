<!DOCTYPE html>
<html>
<%- include("./partials/head") %>

<body>
    <section class="hero is-primary">
        <div class="hero-head"><%- include("./partials/header", { isLanding: true }) %></div>
        <div class="hero-body">
            <div class="container">
                <h2 class="title is-2 tttie-title">Loading extension data...</h2>
                <h4 class="subtitle is-4">Build your extension here.</h4>
            </div>
        </div>
    </section>
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-one-quarter" id="menu">
                    <aside class="menu">
                        <ul class="menu-list">
                            <li>
                                <a href="/dashboard/<%=erisGuild.id%>">Server settings</a>
                            </li>
                            <li><a href="/dashboard/<%=erisGuild.id%>/extensions">Extensions</a>
                                <ul>
                                    <li>
                                        <a href="/dashboard/<%=erisGuild.id%>/extensions/<%=extension.id%><%= isMonaco ? "/monaco" : ""%>"
                                            class="is-active"><span class="tttie-title">Loading...</span>
                                            (<%=extension.id%>)</a>
                                        <ul>
                                            <li>
                                                <a
                                                    href="/dashboard/<%=erisGuild.id%>/extensions/<%=extension.id%><%= isMonaco ? "/monaco" : ""%>#basic-settings">
                                                    Basic settings
                                                </a>
                                            </li>
                                            <li>
                                                <a
                                                    href="/dashboard/<%=erisGuild.id%>/extensions/<%=extension.id%><%= isMonaco ? "/monaco" : ""%>#extension-code">
                                                    Extension code
                                                </a>
                                            </li>
                                            <li>
                                                <a
                                                    href="/dashboard/<%=erisGuild.id%>/extensions/<%=extension.id%><%= isMonaco ? "/monaco" : ""%>#permissions">
                                                    Permissions
                                                </a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </aside>
                </div>
                <div class="column">
                    <div class="tttie-changes-buttons">
                        <div class="buttons">
                            <a href="#" class="button">
                                <span class="icon"><i class="fa fa-arrow-up"></i></span>
                                <span>Back to top</span>
                            </a>

                            <button class="button" id="save">
                                <span class="icon"><i class="fa fa-save"></i></span>
                                <span>Save changes</span>

                            </button>
                            <button class="button is-danger" id="reset">
                                <span class="icon"><i class="fa fa-times"></i></span>
                                <span>Reset settings</span>
                            </button>
                        </div>
                    </div>
                    <h3 class="title is-size-3" id="basic-settings">Basic settings</h3>
                    <div class="content">
                        <h6 class="bot-setting is-size-5">Extension name</h6>
                        <p>This is how the extension will be called in the help menu and the dashboard.</p>
                        <div class="control is-loading">
                            <input class="input" type="text" id="tttie-extension-name">
                        </div>

                    </div>
                    <div class="content">
                        <h6 class="bot-setting is-size-5">Command trigger</h6>
                        <p>The command name used to invoke the extension. tt.bot's commands are
                            prioritized over extensions.</p>
                        <div class="field has-addons">
                            <div class="control">
                                <div class="button is-static"><%=config.prefix%></div>
                            </div>
                            <div class="control is-loading is-expanded">
                                <input class="input" type="text" id="tttie-extension-cmd">
                            </div>
                        </div>
                    </div>
                    <div class="content">
                        <h6 class="bot-setting is-size-5">Store ID</h6>
                        <p>The store under this ID will be used for this extension.
                            <%if (extension.id === "new") {%>
                            To create a new store, leave this field blank.
                            <%}%>
                        </p>
                        <div class="control is-loading is-expanded">
                            <input class="input" type="text" id="tttie-extension-store-id">
                        </div>
                    </div>

                    <div class="content">
                        <h6 class="bot-setting is-size-5" id="extension-code">Extension code</h6>
                        <p>This is the heart of your extension.</p>
                        <a class="button is-fullwidth"
                            href="/dashboard/<%=erisGuild.id%>/extensions/<%=extension.id%><%=isMonaco? '' : '/monaco'%>">Switch
                            to <%= isMonaco ? "textarea" : "code" %> editor</a>
                            <br>
                            <%if (isMonaco) {%>
                            <div class="monaco-wrapper">
                                <div class="monaco-container" id="extension-monaco-container"></div>
                            </div>
                            <%} else {%>
                            <div class="control is-loading">
                                <textarea class="textarea is-family-monospace" id="tttie-textarea-code"
                                    rows="15"></textarea>
                            </div>
                            <%}%>
                    </div>

                    <h3 class="title is-size-3" id="permissions">Permissions</h3>
                    <div class="content">
                        <h6 class="bot-setting is-size-5">Allowed roles</h6>
                        <p>Leaving the listed roles unchecked will let anyone on the server use the extension.</p>
                        <div class="tttie-extension-role-list field">
                            <div class="button is-loading is-fullwidth is-static"></div>
                        </div>
                    </div>

                    <div class="content">
                        <h6 class="bot-setting is-size-5">Allowed channels</h6>
                        <p>Leaving the listed channels unchecked will let the extension run anywhere on the server.</p>
                        <div class="tttie-extension-channel-list field">
                            <div class="button is-loading is-fullwidth is-static"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    
    <script src="/dashboard/<%=erisGuild.id%>/load.js"></script>
    <script src="/dashboard/<%=erisGuild.id%>/extensions/<%=extension.id%>/load.js"></script>
    <script src="/static/js/ttbotapi.js"></script>
    <%if (isMonaco) {%>
    <script src="/monaco/vs/loader.js"></script>
    <script src="/static/js/loadMonaco.js"></script>
    <%}%>
    <script defer src="/static/js/extensions.js"></script>
</body>

</html>