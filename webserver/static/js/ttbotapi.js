!function(n){var e={guildId:null,csrfToken:null,guildConfig:null,savingDashboardChanges:!1,saveDashboardChanges:function(n){return fetch("/api/config/"+e.guildId,{credentials:"include",body:JSON.stringify(n),method:"POST",headers:{"Content-Type":"application/json","CSRF-Token":e.csrfToken}}).then(function(n){return n.json()}).then(function(n){return e.guildConfig=n})},bindToSaveButton:function(n,t,i){n.addEventListener("click",function(){if(e.savingDashboardChanges)return!1;e.savingDashboardChanges=!0;var o=n.innerHTML;n.innerText="Saving...",i(function(i){e.saveDashboardChanges(i).then(function(){n.innerHTML=o,e.savingDashboardChanges=!1,t(e.guildConfig)})})})},bindToResetButton:function(n,t){n.addEventListener("click",function(){t(e.guildConfig)})},getAvailableChannels:function(){return fetch("/api/channels/"+e.guildId,{credentials:"include"}).then(function(n){return n.json()})},getAvailableRoles:function(n){return fetch("/api/roles/"+e.guildId+(n?"?ignoreHierarchy=true":""),{credentials:"include"}).then(function(n){return n.json()})},getConfig:function(){return fetch("/api/config/"+e.guildId,{credentials:"include"}).then(function(n){return n.json()}).then(function(n){return e.guildConfig=n})},getExtension:function(){return fetch("/api/extensions/"+e.guildId+"/"+e.extension,{credentials:"include"}).then(function(n){return n.json()}).then(function(n){return e.extensionData=n})},updateExtension:function(n){return fetch("/api/extensions/"+e.guildId+"/"+e.extension,{credentials:"include",body:JSON.stringify(n),method:"POST",headers:{"Content-Type":"application/json","CSRF-Token":e.csrfToken}}).then(function(n){return n.json()}).then(function(n){return e.extensionData=n})},deleteExtension:function(n){return fetch("/api/extensions/"+e.guildId+"/"+e.extension,{credentials:"include",body:JSON.stringify({deleteStore:!!n}),method:"DELETE",headers:{"Content-Type":"application/json","CSRF-Token":e.csrfToken}}).then(function(){})}};window.ttbot=e}();