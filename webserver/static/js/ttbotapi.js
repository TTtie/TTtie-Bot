"use strict";!function(e){const n=window.ttbot||(window.ttbot={});n.guildId||(n.guildId=null),n.csrfToken||(n.csrfToken=null),n.guildConfig=null,n.userProfile=null,n.savingDashboardChanges=!1;const t=(...n)=>e.fetch(...n).then(d),d=e=>e.ok?e:e.text().then(n=>{const t=document.createElement("div");t.classList.add("modal","is-active","tttie-fade-in");const d=document.createElement("div");d.classList.add("modal-background");const i=document.createElement("div");i.classList.add("modal-card","tttie-slide-in");const o=document.createElement("header");o.classList.add("modal-card-head");const s=document.createElement("p");s.classList.add("modal-card-title"),s.innerText="An error has occured",o.appendChild(s);const a=document.createElement("section");a.classList.add("modal-card-body");const l=document.createElement("pre"),c=document.createElement("code");c.innerText=n,l.append(c),a.append(`HTTP error ${e.status} ${e.statusText}:`,document.createElement("br"),"Request body:",document.createElement("br"),l);const r=document.createElement("footer");r.classList.add("modal-card-foot");const u=document.createElement("button");u.classList.add("button"),u.innerText="Close",u.addEventListener("click",()=>{i.classList.remove("tttie-slide-in"),i.classList.add("tttie-slide-out"),d.classList.add("tttie-fade-out"),i.addEventListener("animationend",()=>{t.remove()},{once:!0})}),r.append(u),i.append(o,a,r),t.append(d,i),document.body.appendChild(t);const h=new Error;throw h.res=e,h});n.saveDashboardChanges=(e=>t(`/api/config/${n.guildId}`,{credentials:"include",body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json","CSRF-Token":n.csrfToken}}).then(e=>e.json()).then(e=>n.guildConfig=e)),n.bindToSaveButton=((e,t,d)=>{e.addEventListener("click",()=>{if(n.savingDashboardChanges)return!1;n.savingDashboardChanges=!0,e.classList.add("is-loading"),e.disabled=!0,d(d=>{n.saveDashboardChanges(d).then(()=>{e.classList.remove("is-loading"),e.disabled=!1,n.savingDashboardChanges=!1,t(n.guildConfig)})})})}),n.bindToResetButton=((e,t)=>{e.addEventListener("click",()=>{t(n.guildConfig)})}),n.getAvailableChannels=(()=>t(`/api/channels/${n.guildId}`,{credentials:"include"}).then(e=>e.json())),n.getAvailableRoles=(e=>t(`/api/roles/${n.guildId}`+(e?"?ignoreHierarchy=true":""),{credentials:"include"}).then(e=>e.json())),n.getConfig=(()=>t(`/api/config/${n.guildId}`,{credentials:"include"}).then(e=>e.json()).then(e=>n.guildConfig=e)),n.getExtension=((e=n.extension)=>t(`/api/extensions/${n.guildId}/${e}`,{credentials:"include"}).then(e=>e.json()).then(e=>n.extensionData=e)),n.updateExtension=((e,d=n.extension)=>t(`/api/extensions/${n.guildId}/${d}`,{credentials:"include",body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json","CSRF-Token":n.csrfToken}}).then(e=>e.json()).then(e=>n.extensionData=e)),n.deleteExtension=function(e,d=n.extension){return t(`/api/extensions/${n.guildId}/${d}`,{credentials:"include",body:JSON.stringify({deleteStore:!!e}),method:"DELETE",headers:{"Content-Type":"application/json","CSRF-Token":n.csrfToken}}).then(()=>void 0)},n.getProfile=(()=>t("/api/profile",{credentials:"include"}).then(e=>e.json()).then(e=>(n.csrfToken=e.csrfToken,delete e.csrfToken,n.userProfile=e))),n.updateProfile=(e=>t("/api/profile",{credentials:"include",body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json","CSRF-Token":n.csrfToken}}).then(e=>e.json()).then(e=>n.userProfile=e)),n.deleteProfile=(()=>t("/api/profile",{credentials:"include",method:"DELETE",headers:{"Content-Type":"application/json","CSRF-Token":n.csrfToken}}).then(()=>void 0))}(window);