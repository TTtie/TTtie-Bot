"use strict";!function(e){var n={guildId:null,csrfToken:null,guildConfig:null,savingDashboardChanges:!1,saveDashboardChanges:e=>fetch(`/api/config/${n.guildId}`,{credentials:"include",body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json","CSRF-Token":n.csrfToken}}).then(e=>e.json()).then(e=>n.guildConfig=e),bindToSaveButton:(e,i,t)=>{e.addEventListener("click",()=>{if(n.savingDashboardChanges)return!1;n.savingDashboardChanges=!0;var s=e.innerHTML;e.innerText="Saving...",t(t=>{n.saveDashboardChanges(t).then(()=>{e.innerHTML=s,n.savingDashboardChanges=!1,i(n.guildConfig)})})})},bindToResetButton:(e,i)=>{e.addEventListener("click",()=>{i(n.guildConfig)})},getAvailableChannels:()=>fetch(`/api/channels/${n.guildId}`,{credentials:"include"}).then(e=>e.json()),getAvailableRoles:e=>fetch(`/api/roles/${n.guildId}`+(e?"?ignoreHierarchy=true":""),{credentials:"include"}).then(e=>e.json()),getConfig:()=>fetch(`/api/config/${n.guildId}`,{credentials:"include"}).then(e=>e.json()).then(e=>n.guildConfig=e),getExtension:()=>fetch(`/api/extensions/${n.guildId}/${n.extension}`,{credentials:"include"}).then(e=>e.json()).then(e=>n.extensionData=e),updateExtension:e=>fetch(`/api/extensions/${n.guildId}/${n.extension}`,{credentials:"include",body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json","CSRF-Token":n.csrfToken}}).then(e=>e.json()).then(e=>n.extensionData=e),deleteExtension:function(e){return fetch(`/api/extensions/${n.guildId}/${n.extension}`,{credentials:"include",body:JSON.stringify({deleteStore:!!e}),method:"DELETE",headers:{"Content-Type":"application/json","CSRF-Token":n.csrfToken}}).then(()=>void 0)}};window.ttbot=n}();