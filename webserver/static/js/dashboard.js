"use strict";!function(e){function t(e,t){return o=>{o.innerHTML="",o.disabled=!1;const l=document.createElement("option");l.value="",l.innerText="None",l.selected=!0,o.appendChild(l),t.forEach(t=>{const l=document.createElement("option");l.value=t.id,l.innerText=(e?"#":"")+t.name,o.appendChild(l)})}}function o(e){const t=document.querySelector("#tttie-dash-p").value;let o;for(const e of document.querySelectorAll("select.tttie-dashboard-role-picker#tttie-dash-mod option"))!0===e.selected&&(o=e.value);const l=document.querySelector("#tttie-dash-fm").value,n=document.querySelector("#tttie-dash-le").value;let c;for(const e of document.querySelectorAll("select.tttie-dashboard-channel-picker#tttie-dash-fc option"))!0===e.selected&&(c=e.value);const a=document.querySelector("#tttie-dash-wm").value;let d,r,s,i,u;for(const e of document.querySelectorAll("select.tttie-dashboard-channel-picker#tttie-dash-wc option"))!0===e.selected&&(d=e.value);for(const e of document.querySelectorAll("select.tttie-dashboard-channel-picker#tttie-dash-ac option"))!0===e.selected&&(r=e.value);for(const e of document.querySelectorAll("select.tttie-dashboard-role-picker#tttie-dash-mr option"))!0===e.selected&&(s=e.value);for(const e of document.querySelectorAll("select.tttie-dashboard-channel-picker#tttie-dash-loc option"))!0===e.selected&&(i=e.value);for(const e of document.querySelectorAll("select.tttie-dashboard-channel-picker#tttie-dash-ml option"))!0===e.selected&&(u=e.value);e({prefix:t,modRole:o,farewellMessage:l,farewellChannelId:c,greetingMessage:a,greetingChannelId:d,agreeChannel:r,memberRole:s,logEvents:n,logChannel:i,modlogChannel:u})}function l(e){const t=document.querySelector("#tttie-dash-p"),o=document.querySelector("#tttie-dash-mod"),l=document.querySelector("#tttie-dash-fm"),n=document.querySelector("#tttie-dash-wm"),c=document.querySelector("#tttie-dash-le");t.value=e.prefix||"",o.value=e.modRole||"",l.value=e.farewellMessage||"",n.value=e.greetingMessage||"",c.value=e.logEvents||"";for(const t of document.querySelectorAll("select.tttie-dashboard-channel-picker#tttie-dash-fc option"))t.value===e.farewellChannelId&&(t.selected=!0);for(const t of document.querySelectorAll("select.tttie-dashboard-channel-picker#tttie-dash-wc option"))t.value===e.greetingChannelId&&(t.selected=!0);for(const t of document.querySelectorAll("select.tttie-dashboard-channel-picker#tttie-dash-ac option"))t.value===e.agreeChannel&&(t.selected=!0);for(const t of document.querySelectorAll("select.tttie-dashboard-channel-picker#tttie-dash-loc option"))t.value===e.logChannel&&(t.selected=!0);for(const t of document.querySelectorAll("select.tttie-dashboard-role-picker#tttie-dash-mr option"))t.value===e.memberRole&&(t.selected=!0);for(const t of document.querySelectorAll("select.tttie-dashboard-channel-picker#tttie-dash-ml option"))t.value===e.modlogChannel&&(t.selected=!0);t.disabled=!1,o.disabled=!1,l.disabled=!1,n.disabled=!1,c.disabled=!1}window.addEventListener("load",()=>{const n=document.querySelectorAll("select.tttie-dashboard-channel-picker"),c=document.querySelectorAll("select.tttie-dashboard-role-picker");e.ttbot.bindToSaveButton(document.querySelector("a.tttie-linkbutton#save"),l,o),e.ttbot.bindToResetButton(document.querySelector("a.tttie-linkbutton#reset"),l),e.ttbot.getAvailableChannels().then(o=>(n.forEach(t(!0,o)),e.ttbot.getAvailableRoles())).then(o=>{c.forEach(t(!1,o.filter(t=>t.id!==e.ttbot.guildId)))}).then(()=>{e.ttbot.getConfig().then(l)})})}(window);