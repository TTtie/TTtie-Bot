!function(e){function t(e,t){return function(n){n.innerHTML="";var o=document.createElement("ul");o.className="tttie-extension-list",t.forEach(function(t){var n=document.createElement("li"),i=document.createElement("label"),c=document.createElement("input");c.id=t.id,c.type="checkbox",c.name=e?"tttie-channels":"tttie-roles",i.htmlFor=t.id,i.innerText=(e?"#":"")+t.name,n.appendChild(c),n.appendChild(i),o.appendChild(n)}),n.appendChild(o)}}function n(t,n){"new"===t.id?document.title+=" - New extension":document.title+=" - Extension: "+t.name;var o=document.querySelector("h1#tttie-title");"new"===t.id?o.innerText="Create a new extension":o.innerText="Extension: "+t.name;var i=document.querySelector("input#tttie-extension-name");for(var c of("new"===t.id?i.value="My cool extension":i.value=t.name,document.querySelectorAll("div.tttie-extension-channel-list")))c.querySelectorAll('input[name="tttie-channels"]').forEach(function(e){t.allowedChannels.includes(e.id)?e.checked=!0:e.checked=!1});for(var c of document.querySelectorAll("div.tttie-extension-role-list"))c.querySelectorAll('input[name="tttie-roles"]').forEach(function(e){t.allowedRoles.includes(e.id)?e.checked=!0:e.checked=!1});if(document.querySelector("input#tttie-extension-store-id").value=t.store,document.querySelector("input#tttie-extension-cmd").value=t.commandTrigger,n){var r=document.querySelector("textarea#tttie-textarea-code");!r&&document.querySelector("div.monaco-container#extension-monaco-container")?e.ttbot.editor.setValue(t.code):r.value=t.code}}window.addEventListener("load",function(){var o=document.querySelectorAll("div.tttie-extension-channel-list"),i=document.querySelectorAll("div.tttie-extension-role-list");e.ttbot.getAvailableChannels().then(function(n){return o.forEach(t(!0,n)),e.ttbot.getAvailableRoles()}).then(function(n){return i.forEach(t(!1,n.filter(function(t){return t.id!==e.ttbot.guildId}))),e.ttbot.getExtension()}).then(function(t){var o,i,c=document.querySelector("textarea#tttie-textarea-code");if(!c&&document.querySelector("div.monaco-container#extension-monaco-container")){var r=function(){fetch("/tt.bot.d.ts").then(function(e){return e.text()}).then(function(n){console.log(n),e.monaco.languages.typescript.javascriptDefaults.addExtraLib(n),e.ttbot.editor=e.monaco.editor.create(document.querySelector("div.monaco-container#extension-monaco-container"),{value:t.code,language:"javascript",theme:"vs-dark"}),e.addEventListener("resize",function(){e.ttbot.editor.layout({height:600,width:document.body.clientWidth>650?650:350})})})},a=function(){if(e.ttbot.monacoLoaded)return r();setTimeout(a,100)};e.ttbot.monacoLoaded?r():setTimeout(a,100)}else c.value=t.code;n(t),o=document.querySelector("a.tttie-linkbutton#reset"),i=function(e){n(e,!0)},o.addEventListener("click",function(){i(ttbot.extensionData)})})})}(window);